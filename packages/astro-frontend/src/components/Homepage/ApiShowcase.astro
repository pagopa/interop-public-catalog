---
import { EService } from '../../../../models/src/types/eservice'
import { useHomepageTranslations } from '../../i18n/homepage.i18n'
import { getLangFromUrl } from '../../i18n/utils.i18n'
import { EServiceCard } from '../shared/EServiceCard'
import { Section } from '../shared/Section'

interface Props {
  title: string
  highlightedEServices: EService[]
}

const { title, highlightedEServices } = Astro.props

const currentLocale = getLangFromUrl(Astro.url.pathname)
const t = useHomepageTranslations(currentLocale)
---

<Section title={title} sectionLink={{ text: t('featured_api.explore_catalog'), href: '#' }}>
  <div class="px-0">
    <div class="row">
      {
        highlightedEServices.map(({ name, producerId /* TODO producerName */, description }) => (
          <div class="col-12 col-lg-4 mb-4">
            <EServiceCard
              currentLocale={currentLocale}
              name={name}
              description={description}
              producerName={producerId /* TODO producerName */}
            />
          </div>
        ))
      }
    </div>
  </div>
</Section>
