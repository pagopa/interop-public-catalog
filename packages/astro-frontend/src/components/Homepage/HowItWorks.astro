---
import { useHomepageTranslations } from '../../i18n/homepage.i18n'
import BootstrapItaliaIcon from '../shared/BootstrapItaliaIcon.astro'
import searchImage from '../../assets/images/024-search.svg'
import networkImage from '../../assets/images/077-network.svg'
import jigsawImage from '../../assets/images/088-jigsaw.svg'
import Section from '../shared/Section.astro'

const t = useHomepageTranslations()

const howItWorksSteps = [
  {
    title: t('how_it_works.step_1.title'),
    description: t('how_it_works.step_1.description'),
    linkLabel: t('how_it_works.step_1.link'),
    icon: 'it-file',
    href: '#', // TODO: inserire link reale "Esplora il catalogo"
    image: searchImage,
  },
  {
    title: t('how_it_works.step_2.title'),
    description: t('how_it_works.step_2.description'),
    linkLabel: t('how_it_works.step_2.link'),
    icon: 'it-layers',
    href: '#', // TODO: inserire link reale "Vai alla piattaforma PDND"
    image: networkImage,
  },
  {
    title: t('how_it_works.step_3.title'),
    description: t('how_it_works.step_3.description'),
    linkLabel: t('how_it_works.step_3.link'),
    icon: 'it-cloud-upload',
    href: '#', // TODO: inserire link reale "Consulta gli esempi"
    image: jigsawImage,
  },
] as const
---

<Section className="section-muted" title={t('how_it_works.title')}>
  <ul class="list-group list-group-horizontal-lg">
    {
      howItWorksSteps.map((step, index) => (
        <>
          <li class="flex-fill list-group-item bg-transparent border-0">
            {/* Card */}
            <article class="it-card bg-transparent d-flex flex-column h-100">
              <div class="it-card-banner-icon-wrapper mb-2">
                <img src={step.image.src} alt="" role="presentation" width="96" height="96" />
              </div>
              {/* Card Body */}
              <h3 class="it-card-title h5">{step.title}</h3>
              <div class="it-card-body mb-2">
                <p class="it-card-text">{step.description}</p>
              </div>
              {/* Card Footer */}
              <footer class="it-card-related it-card-footer mt-auto">
                <div class="it-card-taxonomy">
                  <a
                    href={step.href}
                    class="it-card-category it-card-link text-uppercase text-primary"
                  >
                    {step.linkLabel}
                    <BootstrapItaliaIcon name="it-arrow-right" size="sm" color="primary" />
                  </a>
                </div>
              </footer>
            </article>
          </li>
          {index < howItWorksSteps.length - 1 && (
            <>
              {/* Horizontal separator for mobile/tablet */}
              <hr class="d-block d-lg-none my-3 border-2 border-primary" />
              {/* Vertical separator for large screens */}
              <div class="vr d-none d-lg-block mx-2 text-primary" />
            </>
          )}
        </>
      ))
    }
  </ul>
</Section>
