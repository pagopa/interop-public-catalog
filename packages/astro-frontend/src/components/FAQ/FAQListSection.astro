---
import {
  renderRichTextStrapiNodes,
  type StrapiNode,
} from '../../utils/rich-text-strapi-renderer.js'
interface Props {
  sectionId: number
  title: string
  faqs: Array<{ id: number; question: string; answer: StrapiNode[] }>
}

const { sectionId, title, faqs } = Astro.props
---

<section class="section section-muted px-0 px-md-auto py-5">
  <div class="section-content">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-md-9">
          <h2 class="mb-4">{title}</h2>
          <div class="accordion" id=`accordionGroup${sectionId}`>
            {
              faqs.map(({ question, answer, id }) => (
                <>
                  <div class="accordion-item bg-transparent">
                    <h2 class="accordion-header" id={`heading${sectionId}${id}`}>
                      <button
                        class="accordion-button collapsed"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target={`#collapse${sectionId}${id}`}
                        aria-expanded="false"
                        aria-controls={`collapse${sectionId}${id}`}
                      >
                        {question}
                      </button>
                    </h2>
                    <div
                      id={`collapse${sectionId}${id}`}
                      class="accordion-collapse collapse"
                      data-bs-parent={`#accordionGroup${sectionId}`}
                      role="region"
                      aria-labelledby={`heading${sectionId}${id}`}
                    >
                      <div class="accordion-body">
                        <div set:html={renderRichTextStrapiNodes(answer)} />
                      </div>
                    </div>
                  </div>
                </>
              ))
            }
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
