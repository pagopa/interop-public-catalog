---
import { marked, RendererObject } from 'marked'
import Section from '../shared/Section.astro'
import PageIndexNav from '../shared/PageIndexNav.astro'

const md = `
## Descrizione

L'erogazione di qualunque tipo di bonus da parte di **enti pubblici** prevede la verifica puntuale dei requisiti previsti dalla norma che regola l'agevolazione in questione. **ISEE**, **residenza**, stato di famiglia sono tra le certificazioni più richieste, che devono essere presentate dal cittadino, spesso anche in formato cartaceo, e verificate tramite istruttorie lunghe e onerose.

![Example](https://example.com/images/remote-image.png)

## Cosa cambia con la PNDD

L'ente può accedere direttamente alle **banche dati ufficiali** esposte sulla **PNDD** per la verifica di requisiti, semplificando notevolmente la procedura, riducendo i tempi per l'erogazione e i possibili errori.

Le **verifiche automatiche** possono essere implementate già in fase di presentazione della domanda, consentendo al cittadino di recuperare tramite **interoperabilità** il dato richiesto durante la richiesta del servizio, attuando così il principio del **'once-only'**, per cui non deve fornire alla PA i dati già in suo possesso.

## Vantaggi per la Pubblica Amministrazione

*Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras lectus dui, laoreet nec libero non, vestibulum eleifend leo. Praesent vitae ex sit amet justo lacinia dignissim ac at diam:*

* **Verifica automatica** dei dati (es. anagrafici, reddituali) costantemente aggiornati e certificati da fonti ufficiali
* **Eliminazione delle istruttorie** per la verifica successiva dei dati forniti
* **Digitalizzazione** dei processi con conseguente **tracciabilità**

## Vantaggi per le persone

*Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras lectus dui, laoreet nec libero non, vestibulum eleifend leo. Praesent vitae ex sit amet justo lacinia dignissim ac at diam:*

* Non è più necessario produrre **autocertificazioni** per i dati forniti
* I **tempi di formulazione della richiesta e di erogazione del bonus sono più rapidi**
* **Minor rischio di errori** nella verifica dei requisiti e di esclusione quando titolati a ricevere il bonus

## Un esempio concreto

Il **MIMIT** sta erogando il "**bonus elettrodomestici**" verificando in automatico tramite la PNDD l'**ISEE** dei richiedenti. La domanda può essere presentata solo se il cittadino risulta eleggibile a seguito dei controlli effettuati ex ante tramite l'interrogazione degli e-service dell'**INPS**, che restituiscono il dato certificato e aggiornato in **tempo reale dell'utente**.

Questo approccio introduce molti elementi di semplificazione per tutti gli attori coinvolti: riduce la presentazione di domande non pertinenti, consente l'erogazione più veloce del bonus, non richiede al cittadino di anticipare nessuna somma, ma abilita lo **sconto diretto in fase di acquisto**.
`
const headings: Array<{ id: string; label: string }> = []

function toKebabCase(str: string): string {
  return str
    .replace(/([a-z])([A-Z])/g, '$1-$2')
    .replace(/\s+/g, '-')
    .replace(/_+/g, '-')
    .toLowerCase()
}

const renderer: RendererObject<string, string> = {
  heading({ text }) {
    const headingId = toKebabCase(text) + '-section-title'
    headings.push({ id: headingId, label: text })
    return `<h2 id="${headingId}" class="h5">${text}</h2>`
  },
  image({ href, text }) {
    return `
      <figure style="background-color: #f2f2f2;" class="d-flex align-items-center flex-column py-3">
        <picture>
          <img src="${href}" alt="${text}" class="my-4 mx-auto max-h-60" />
        </picture>
        <figcaption class="text-center">${text}</figcaption>
      </figure>
    `
  },
}

marked.use({
  renderer,
})

const content = marked(md)
---

<div class="container">
  <div class="row">
    <div class="col-3">
      <PageIndexNav
        title="Indice della pagina"
        headings={headings}
        style="top: 1rem;"
        class="position-sticky"
      />
    </div>
    <div class="col-9">
      <article id="use-case-details-content" set:html={content} />
    </div>
  </div>
</div>
